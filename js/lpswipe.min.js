/* Swipe Detection Plugin | Leon Slater | www.lpslater.co.uk */
(function(){var e={start:{IEedge:"pointerdown",IE10:"MSPointerDown",webkit:"touchstart"},move:{IEedge:"pointermove",IE10:"MSPointerMove",webkit:"touchmove"},end:{IEedge:"pointerup",IE10:"MSPointerUp",webkit:"touchend"},cancel:{IEedge:"pointercancel",IE10:"MSPointerCancel",webkit:"touchcancel"}},t="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,n=window.navigator.pointerEnabled,r=window.navigator.msPointerEnabled,i=t?n||r:false,s=i?n?"IEedge":"IE10":"webkit",o=e.cancel[s],u=e.start[s],a=e.move[s],f=e.end[s],l=0,c=Math.abs;window.lpswipe=function(e,n){function d(e){function S(){l--;t=0;n=0;s=0;p=0;d=h;v=-1;m=null;e.removeEventListener(a,C);e.removeEventListener(f,k);if(!E){if(l===0){w.style.msTouchAction="";w.style.touchAction=""}if(i){w.removeEventListener(a,C);w.removeEventListener(f,k)}}if(typeof r.reset=="function"){r.reset(g)}}function x(){return{horizontal:n>r.threshold?"right":n<-r.threshold?"left":"notReached",vertical:p>r.threshold?"down":p<-r.threshold?"up":"notReached",all:null}[r.swipeDirection]}function T(e,t){var n=i?e.pointerType==="touch"||e.pointerType===2:true;if(n){switch(t){case"start":n=v===-1;break;case"move":if(i){n=v===e.pointerId}else{n=v===e.targetTouches[0].identifier}break;case"end":if(i){n=v===e.pointerId}else{n=v===e.changedTouches[0].identifier}break}}return n}function N(n){if(T(n,"start")){var o=i?n:n.targetTouches[0];t=o.clientX;s=o.clientY;e.addEventListener(a,C);e.addEventListener(f,k);v=i?o.pointerId:o.identifier;if(i&&!E){w.addEventListener(a,C);w.addEventListener(f,k)}if(l===0&&!E){w.style.msTouchAction="none";w.style.touchAction="none"}l++;if(typeof r.start=="function"){r.start({el:e})}}}function C(e){if(T(e,"move")){var o=i?e:e.targetTouches[0];n=o.clientX-t;p=o.clientY-s;if(d){var u={horizontal:c(p)>c(n),vertical:c(p)<c(n),all:false};d=u[r.swipeDirection]}if(!d){e.preventDefault();if(typeof r.moving=="function"){g.x=n;g.y=p;r.moving(g)}}else{S()}}}function k(e){if(T(e,"end")){if(!d){m=x();if(typeof r.beforeEnd=="function"){r.beforeEnd(g)}if(typeof r[m]=="function"){r[m](g)}if(typeof r.end=="function"){r.end(g)}}S()}}var t=0,n=0,s=0,p=0,d=h,v=-1,m=null,g={},y={horizontal:"pan-y",vertical:"pan-x",all:"none"},b=y[r.swipeDirection],w=document.documentElement,E=e===w;e.style.msTouchAction=b;e.style.touchAction=b;if(e.addEventListener){e.addEventListener(u,N);e.addEventListener(o,S)}}if(!t){return}var r={threshold:20,swipeDirection:"horizontal",start:function(e){},reset:function(e){},moving:function(e){},beforeEnd:function(e){},end:function(e){},right:function(e){},left:function(e){},up:function(e){},down:function(e){},notReached:function(e){}};for(var s in n){if(r.hasOwnProperty(s)){r[s]=n[s]}}var h=r.swipeDirection!=="all";if(e.length===undefined){d(e)}else{for(var p=0;p<e.length;p++){d(e[p])}}};if(window.jQuery){jQuery.fn.lpswipe=function(e){lpswipe(this,e)}}})()