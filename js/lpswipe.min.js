/* Swipe Detection Plugin | Leon Slater | www.lpslater.co.uk */
(function(){var e={start:{IEedge:"pointerdown",IE10:"MSPointerDown",webkit:"touchstart"},move:{IEedge:"pointermove",IE10:"MSPointerMove",webkit:"touchmove"},end:{IEedge:"pointerup",IE10:"MSPointerUp",webkit:"touchend"},cancel:{IEedge:"pointercancel",IE10:"MSPointerCancel",webkit:"touchcancel"}},t="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,n=window.navigator.pointerEnabled,r=window.navigator.msPointerEnabled,i=t?n||r:false,s=i?n?"IEedge":"IE10":"webkit",o=e.cancel[s],u=e.start[s],a=e.move[s],f=e.end[s],l=0,c=Math.abs;window.lpswipe=function(e,t){function p(e){function S(){l--;t=0;r=0;h=0;p=0;d=s;v=-1;m=null;e.removeEventListener(a,C);e.removeEventListener(f,k);if(!E){if(l===0){w.style.msTouchAction="";w.style.touchAction=""}if(i){w.removeEventListener(a,C);w.removeEventListener(f,k)}}if(typeof n.reset=="function"){n.reset(g)}}function x(){return{horizontal:r>n.threshold?"right":r<-n.threshold?"left":"notReached",vertical:p>n.threshold?"down":p<-n.threshold?"up":"notReached",all:null}[n.swipeDirection]}function T(e,t){var n=i?e.pointerType==="touch"||e.pointerType===2:true;if(n){switch(t){case"start":n=v===-1;break;case"move":if(i){n=v===e.pointerId}else{n=v===e.targetTouches[0].identifier}break;case"end":if(i){n=v===e.pointerId}else{n=v===e.changedTouches[0].identifier}break}}return n}function N(r){if(T(r,"start")){var s=i?r:r.targetTouches[0];t=s.clientX;h=s.clientY;e.addEventListener(a,C);e.addEventListener(f,k);v=i?s.pointerId:s.identifier;if(i&&!E){w.addEventListener(a,C);w.addEventListener(f,k)}if(l===0&&!E){w.style.msTouchAction="none";w.style.touchAction="none"}l++;if(typeof n.start=="function"){n.start({el:e})}}}function C(e){if(T(e,"move")){var s=i?e:e.targetTouches[0];r=s.clientX-t;p=s.clientY-h;if(d){var o={horizontal:c(p)>c(r),vertical:c(p)<c(r),all:false};d=o[n.swipeDirection]}if(!d){e.preventDefault();if(typeof n.moving=="function"){g.x=r;g.y=p;n.moving(g)}}else{S()}}}function k(e){if(T(e,"end")){if(!d){m=x();if(typeof n.beforeEnd=="function"){n.beforeEnd(g)}if(typeof n[m]=="function"){n[m](g)}if(typeof n.end=="function"){n.end(g)}}S()}}var t=0,r=0,h=0,p=0,d=s,v=-1,m=null,g={},y={horizontal:"pan-y",vertical:"pan-x",all:"none"},b=y[n.swipeDirection],w=document.documentElement,E=e===w;e.style.msTouchAction=b;e.style.touchAction=b;if(e.addEventListener){e.addEventListener(u,N);e.addEventListener(o,S)}}var n={threshold:20,swipeDirection:"horizontal",start:function(e){},reset:function(e){},moving:function(e){},beforeEnd:function(e){},end:function(e){},right:function(e){},left:function(e){},up:function(e){},down:function(e){},notReached:function(e){}};for(var r in t){if(n.hasOwnProperty(r)){n[r]=t[r]}}var s=n.swipeDirection==="all"?false:true;if(e.length===undefined){p(e)}else{for(var h=0;h<e.length;h++){p(e[h])}}};if(window.jQuery){jQuery.fn.lpswipe=function(e){lpswipe(jQuery(this),e)}}})()