/* Swipe Detection Plugin | Leon Slater | www.lpslater.co.uk */
(function(){var e={start:{IEedge:"pointerdown",IE10:"MSPointerDown",webkit:"touchstart"},move:{IEedge:"pointermove",IE10:"MSPointerMove",webkit:"touchmove"},end:{IEedge:"pointerup",IE10:"MSPointerUp",webkit:"touchend"},cancel:{IEedge:"pointercancel",IE10:"MSPointerCancel",webkit:"touchcancel"}},t="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,n=window.navigator.pointerEnabled,r=window.navigator.msPointerEnabled,i=t?n||r:false,s=i?n?"IEedge":"IE10":"webkit",o=e.cancel[s],u=e.start[s],a=e.move[s],f=e.end[s],l=0,c=Math.abs;window.taction=function(e,n){function p(e){function S(){l--;t=0;n=0;s=0;p=0;d=h;v=-1;e.removeEventListener(a,k);e.removeEventListener(f,L);if(!w){if(l===0){b.style.msTouchAction="";b.style.touchAction=""}if(i){b.removeEventListener(a,k);b.removeEventListener(f,L)}}N("reset",m);E=true}function x(){return{horizontal:n>r.threshold?"right":n<-r.threshold?"left":"notReached",vertical:p>r.threshold?"down":p<-r.threshold?"up":"notReached",all:null}[r.swipeDirection]}function T(e,t){var n=i?e.pointerType==="touch"||e.pointerType===2:true;if(n){switch(t){case"start":n=v===-1;break;case"move":if(i){n=v===e.pointerId}else{n=v===e.targetTouches[0].identifier}break;case"end":if(i){n=v===e.pointerId}else{n=v===e.changedTouches[0].identifier}break}}return n}function N(e,t){var n=true;if(typeof r[e]=="function"){if(E){return}n=r[e](m);if(n===false){S()}}}function C(n){if(T(n,"start")){var r=i?n:n.targetTouches[0];t=r.clientX;s=r.clientY;E=false;e.addEventListener(a,k);e.addEventListener(f,L);v=i?r.pointerId:r.identifier;if(i&&!w){b.addEventListener(a,k);b.addEventListener(f,L)}if(l===0&&!w){b.style.msTouchAction="none";b.style.touchAction="none"}l++;N("start",{el:e,event:n})}}function k(e){if(T(e,"move")){var o=i?e:e.targetTouches[0];n=o.clientX-t;p=o.clientY-s;if(d){d={horizontal:c(p)>c(n),vertical:c(p)<c(n),all:false}[r.swipeDirection]}if(!d){e.preventDefault();m.x=n;m.y=p;N("moving",m)}else{S()}}}function L(e){if(T(e,"end")){if(!d){N("beforeEnd",m);N(x(),m);N("end",m)}S()}}var t=0,n=0,s=0,p=0,d=h,v=-1,m={},g={horizontal:"pan-y",vertical:"pan-x",all:"none"},y=g[r.swipeDirection],b=document.documentElement,w=e===b,E=false;e.style.msTouchAction=y;e.style.touchAction=y;if(e.addEventListener){e.addEventListener(u,C);e.addEventListener(o,S)}}if(!t){return}var r={threshold:20,swipeDirection:"horizontal",start:function(){},reset:function(){},moving:function(){},beforeEnd:function(){},end:function(){},right:function(){},left:function(){},up:function(){},down:function(){},notReached:function(){}};for(var s in n){if(r.hasOwnProperty(s)){r[s]=n[s]}}var h=r.swipeDirection!=="all";if(e.length===undefined){p(e)}else{for(var d=0;d<e.length;d++){p(e[d])}}};if(window.jQuery){jQuery.fn.taction=function(e){window.taction(this,e)}}})()