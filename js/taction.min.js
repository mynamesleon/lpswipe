/* Swipe Detection Plugin | Leon Slater | www.lpslater.co.uk */
(function(){var e={start:{IEedge:"pointerdown",IE10:"MSPointerDown",webkit:"touchstart"},move:{IEedge:"pointermove",IE10:"MSPointerMove",webkit:"touchmove"},end:{IEedge:"pointerup",IE10:"MSPointerUp",webkit:"touchend"},cancel:{IEedge:"pointercancel",IE10:"MSPointerCancel",webkit:"touchcancel"}},t="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,n=window.navigator.pointerEnabled,r=window.navigator.msPointerEnabled,i=t?n||r:false,s=i?n?"IEedge":"IE10":"webkit",o=e.cancel[s],u=e.start[s],a=e.move[s],f=e.end[s],l=0,c=Math.abs;window.taction=function(e,n){function p(e){function E(){l--;t=0;n=0;s=0;p=0;d=h;v=-1;if(i){b.removeEventListener(a,C);b.removeEventListener(f,k)}else{e.removeEventListener(a,C);e.removeEventListener(f,k)}if(l===0){b.style.msTouchAction="";b.style.touchAction=""}T("reset",m);w=true}function S(){return{horizontal:n>r.threshold?"right":n<-r.threshold?"left":"notReached",vertical:p>r.threshold?"down":p<-r.threshold?"up":"notReached",all:null}[r.swipeDirection]}function x(e,t){var n=i?e.pointerType==="touch"||e.pointerType===2:true;if(n){switch(t){case"start":n=v===-1;break;case"move":if(i){n=v===e.pointerId}else{n=v===e.targetTouches[0].identifier}break;case"end":if(i){n=v===e.pointerId}else{n=v===e.changedTouches[0].identifier}break}}return n}function T(e,t){var n=true;if(typeof r[e]=="function"){if(w){return}n=r[e](m);if(n===false){E()}}}function N(n){if(x(n,"start")){var r=i?n:n.targetTouches[0];t=r.clientX;s=r.clientY;w=false;v=i?r.pointerId:r.identifier;if(i){b.addEventListener(a,C);b.addEventListener(f,k)}else{e.addEventListener(a,C);e.addEventListener(f,k)}if(l===0){b.style.msTouchAction="none";b.style.touchAction="none"}l++;T("start",{el:e,event:n})}}function C(e){if(x(e,"move")){var o=i?e:e.targetTouches[0];n=o.clientX-t;p=o.clientY-s;if(d){d={horizontal:c(p)>c(n),vertical:c(p)<c(n),all:false}[r.swipeDirection]}if(!d){e.preventDefault();m.x=n;m.y=p;T("moving",m)}else{E()}}}function k(e){if(x(e,"end")){if(!d){T("beforeEnd",m);T(S(),m);T("end",m)}E()}}var t=0,n=0,s=0,p=0,d=h,v=-1,m={},g={horizontal:"pan-y",vertical:"pan-x",all:"none"},y=g[r.swipeDirection],b=document.documentElement,w=false;e.style.msTouchAction=y;e.style.touchAction=y;if(e.addEventListener){e.addEventListener(u,N);e.addEventListener(o,E)}}if(!t){return}var r={threshold:20,swipeDirection:"horizontal",start:function(){},reset:function(){},moving:function(){},beforeEnd:function(){},end:function(){},right:function(){},left:function(){},up:function(){},down:function(){},notReached:function(){}};for(var s in n){if(r.hasOwnProperty(s)){r[s]=n[s]}}var h=r.swipeDirection!=="all";if(e.length===undefined){p(e)}else{for(var d=0;d<e.length;d++){p(e[d])}}};if(window.jQuery){jQuery.fn.taction=function(e){window.taction(this,e)}}})()