/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~                Swipe Detection Plugin               ~~
~~           Leon Slater, www.lpslater.co.uk           ~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
(function(e){var t={start:{IEedge:"pointerdown",IE10:"MSPointerDown",webkit:"touchstart"},move:{IEedge:"pointermove",IE10:"MSPointerMove",webkit:"touchmove"},end:{IEedge:"pointerup",IE10:"MSPointerUp",webkit:"touchend"},cancel:{IEedge:"pointercancel",IE10:"MSPointerCancel",webkit:"touchcancel"}};var n="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,r=window.navigator.pointerEnabled,i=window.navigator.msPointerEnabled,s=n?r||i:false,o=s?r?"IEedge":"IE10":"webkit",u=t.cancel[o],a=t.start[o],f=t.move[o],l=t.end[o];e.fn.lpswipe=function(t){var n={threshold:20,swipeDirection:"horizontal",start:function(e){},right:function(e){},left:function(e){},up:function(e){},down:function(e){},moving:function(e){},notReached:function(e){},end:function(e){}};t=e.extend({},n,t);return this.each(function(){function y(){r=0;i=0;o=0;c=0;h=true;p=-1;d=null;e("html").css({"-ms-touch-action":"auto","touch-action":"auto"});n.off(f,E).off(l,S);if(s){e("html").off(f,E).off(l,S)}}function b(e,t){var n;switch(t){case"start":n=p===-1;break;case"move":if(s){n=p===e.originalEvent.pointerId}else{n=p===e.originalEvent.targetTouches[0].identifier}break;case"end":if(s){n=p===e.originalEvent.pointerId}else{n=p===e.originalEvent.changedTouches[0].identifier}break}if(s&&n){n=e.originalEvent.pointerType==="touch"||e.originalEvent.pointerType===2}return n}function w(i){if(b(i,"start")){var u=s?i.originalEvent:i.originalEvent.targetTouches[0];r=u.clientX;o=u.clientY;n.on(f,E).on(l,S);if(s){e("html").on(f,E).on(l,S)}p=s?i.originalEvent.pointerId:i.originalEvent.targetTouches[0].identifier;e("html").css({"-ms-touch-action":"none","touch-action":"none"});if(typeof t.start=="function"){t.start(v)}}}function E(e){if(b(e,"move")){var n=s?e.originalEvent:e.originalEvent.targetTouches[0];i=n.clientX-r;c=n.clientY-o;if(h){var u={horizontal:Math.abs(c)>Math.abs(i),vertical:Math.abs(c)<Math.abs(i),all:false};h=u[t.swipeDirection]}if(!h){e.preventDefault();if(typeof t.moving=="function"){v.posX=i;v.posY=c;t.moving(v)}}else{y()}}}function S(e){if(b(e,"end")){if(!h){if(t.swipeDirection==="horizontal"){d=i>t.threshold?"right":i<-t.threshold?"left":"notReached"}else if(t.swipeDirection==="vertical"){d=c>t.threshold?"down":c<-t.threshold?"up":"notReached"}else{d=null}v.posX=i;v.posY=c;switch(d){case"left":if(typeof t.left=="function"){t.left(v)}break;case"right":if(typeof t.right=="function"){t.right(v)}break;case"up":if(typeof t.up=="function"){t.up(v)}break;case"down":if(typeof t.down=="function"){t.down(v)}break;case"notReached":if(typeof t.notReached=="function"){t.notReached(v)}break}if(typeof t.end=="function"){t.end(v)}}y()}}var n=e(this),r=0,i=0,o=0,c=0,h=true,p=-1,d=null,v={$el:n};var m={horizontal:"pan-y",vertical:"pan-x",all:"none"},g=m[t.swipeDirection];n.css({"-ms-touch-action":g,"touch-action":g}).on(a,w).on(u,y)})}})(jQuery)
